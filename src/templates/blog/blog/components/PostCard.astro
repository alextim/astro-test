---
import getCardSchema from '@/lib/getCardSchema';
import ReadMore from './ReadMore.astro';

export interface Props {
  post: Post;
  readMore?: string;
}
const {
  post: { locale, cover, title, excerpt, headline, metaDescription, datePublished, dateModified, authors, to },
  readMore,
} = Astro.props;

const schema = JSON.stringify(
  getCardSchema({
    locale,

    organizationName: 'test',
    siteUrl: Astro.site.href,

    publisher: '',

    to,
    pageType: 'BlogPosting',

    title,
    headline: headline || metaDescription,
    datePublished,
    dateModified,
    authors,
    imgTo: cover && cover.sm ? cover.sm : '',
  })
);

---

<article class="bg-gray-50 rounded hover:shadow">
  {`<script type="application/ld+json">${schema}</script>`}
  {cover ? (
    <a href={to}>
      <img class="h-auto w-full rounded-t" src={cover.sm} alt={cover.alt} title={cover.title} />
    </a>
  ) : null}
  <div class="p-4">
    <a href={to} class="color-text focus:no-underline hover:no-underline active:no-underline">
      <h2 class="m-0 text-lg font-body font-semibold normal-case text-left">{title}</h2>
    </a>
    <p class="pt-2">{excerpt}</p>
    <ReadMore {to} title={readMore} />
  </div>
</article>
