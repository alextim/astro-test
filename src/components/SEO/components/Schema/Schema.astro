---
export interface Props {
  meta: Partial<SeoMeta>[];
  link: Partial<SeoLink>[];
}

import getPageSchema from './helpers/getPageSchema';
import getWebSiteSchema from './helpers/getWebSiteSchema';
import getOrganizationSchema from './helpers/getOrganizationSchema';
import getBreadcrumbsSchema from './helpers/getBreadcrumbsSchema';

const { props } = Astro;
const { pathname, breadcrumbs } = props as BaseSEO;

const schemaWeSite = getWebSiteSchema(props);

const schemaWebPage = getPageSchema({ ...props, headline: props.headline || props.description, organizationName: props.address.name });

const isRoot = pathname === '/';

const schemaOrg = isRoot ? getOrganizationSchema(props) : null;

const schemaBreadcrumbs = !isRoot && breadcrumbs ? getBreadcrumbsSchema(props) : null;
---

{`<script type="application/ld+json">${JSON.stringify(schemaWeSite)}</script>`}
{`<script type="application/ld+json">${JSON.stringify(schemaWebPage)}</script>`}
{isRoot && `<script type="application/ld+json">${JSON.stringify(schemaOrg)}</script>`}
{schemaBreadcrumbs && `<script type="application/ld+json">${JSON.stringify(schemaBreadcrumbs)}</script>`}
