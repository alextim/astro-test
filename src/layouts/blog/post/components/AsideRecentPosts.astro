---
import config from '@/config/website';
import i18n from '@/config/i18n';
import AsidePosts from './AsidePosts.astro';
import { fetchPosts } from '@/lib/api';

export interface Props {
  t: ITranslationFunc;
}

const { t } = Astro.props;
const title = t('post.widget.recent');

const locale = Astro.request.params.locale || i18n.defaultLocale;

const posts = await fetchPosts(locale, {
  limit: config.recentPostsLimit,
});
---
{posts && posts.length > 0 && <AsidePosts title={title} posts={posts} />}
